# Chapter 2 用户指南
## 2.1 软件环境
AquaCrop是一个菜单驱动的程序，拥有良好的GUI界面。采用Windows（或者称为菜单）与用户交互，并且菜单中多重的图表帮助用户了解到输入值变化可能引起的后果和分析模拟结果。

Main menu是各项输入数据的总的入口，并且可以更新其中的数据。输入包括气象数据、作物、灌溉和田间管理、土壤水和地下水特点等影响作物生长的环境的量。同样，还需要播种或种植的日期、模拟时段、模拟时的初始条件等。如果模拟期间与作物生长周期不符合，没有作物生长期间的条件也可由输入指定。

在模拟前，用户通过Main menu指定播种日期、模拟期间和合适的环境，初始和无作物期间的条件。输入可以从已有输入文件中读取，如果没有输入文件，则采用默认值。用户也可以选择一个包含所有所需信息的输入项目运行，并采用田间实测数据文件来评估模型模拟的效果。

当运行一次模拟时，用户可以通过Simulation run菜单追踪土壤水分和盐分含量、作物生长、土壤蒸发作物蒸腾、生物量、产量和水分生产效率的变化。输出文件被存储在output文件夹，可以被当作文本文件打开并进行进一步的后处理。

模型设置允许用户中断计算流程，或者变更AquaCrop的默认设置。Program Setting按钮的Reset，可以将模型取值重新设置为默认值（6.1版本中未发现该按钮，或许改版了）。

## 2.2 Main menu
<img src=".\Figs\Fig2.2.png" width="500px" />

Main menu包含2个展示所选择的输入文件名字和相关描述的面板，
* 环境和作物面板，其中用户可以：
  * 选择Climate、Crop、Irrigation and Field management、Soil Profile and Groundwater，并且可以展示或者更新相应的数据；
  * 指定作物生长的开始时间；
* 模拟面板，用户可以
  * 指定Simulation period；
  * 选择或者新建Initial conditions、Off-season条件、Project和Field data文件、并且可以展示或者更新相应的数据；
  * 对于指定的环境、作物和模拟设置，运行一次模拟。

## 2.3 默认设置
### 2.3.1 输入条件
AquaCrop启动后，自动选择默认的作物和土壤文件，而其他文件默认不选择（图2.2中灰色的输入框中显示“None”）。各输入的默认信息如下所示，

* Climate，文件：None。将会给一个默认的最大、最小温度（见Climate），ET0默认5 mm/day，没有降雨，CO2浓度在整个生育期均为369.47 ppm。当没有climate文件运行模型时，用户仍然有选项可以指定ET0和降雨。这些气象数据可以在Simulation run按钮（该按钮点了之后弹出弹窗，而并不会直接run，可以在弹窗中指定）的输入面板中按天指定。
* Crop，文件默认，按照一般作物数据给。
* Irrigation management，文件：None。假设雨养作物。当运行时还可以指定。
* Field management，文件：None。没有田间管理措施，假设没有土壤肥力限制，地表也没有什么影响土壤蒸发和地表径流。
* Soil，文件默认，默认壤土。
* Groundwater，文件：None。假设不存在地下水位。
* Period，模拟期和作物生育期完全重合。
* Initial conditions，文件：None。含水率为田持含水率，不考虑盐分。
* Off-season conditions，文件：None。作物生育期外，没有其他田间管理措施，没有覆膜。

### 2.3.2 程序设置

## 2.4 选择输入文件，取消选择
在主菜单选择<Select/Create>命令，用户进入输入文件存储的位置。默认的输入储存在DATA子文件夹下，通过<Path>按钮用户可以指定其他路径。
### 2.4.1 选择一个文件
### 2.4.2 取消选择

## 2.5 展示或更新输入信息
### 2.5.1 展示输入信息
在Main menu中点每一项前面的那个小画，就可以展示了。
### 2.5.2 更新输入信息

## 2.6 创建输入文件
### 2.6.1 存储在硬盘中
### 2.6.2 Save as
### 2.6.3 创建文件
* 创建气象文件
创建气象文件包含创建温度文件、ET0文件、降雨文件和CO2文件。
* 创建/导入ET0、降雨或温度文件
> 发现CO2文件不能被新建
* 创建作物文件
创建作物文件时，包含作物种植方法、指定种植日期和生长时间（自动计算出收获日期）。AquaCrop根据选择自动生成完整的作物参数（选择的东西很少啊，这参数获得也太随意了点吧）。作物类型被固定，不能再改变了，其他参数还可以调整。
* 创建灌溉文件
首先需要指定文件类型，分别为需水净灌溉、灌溉制度、一般灌溉制度。
创建灌溉文件，以上3种类型所需信息如下所示，
  * 确定净灌溉需水量的作物允许消耗
  * 时间、灌溉水深、水质
  * 确定灌溉的灌溉水质、时间、水深标准
* 创建田间管理文件
用户需要指定土壤肥力、覆膜比例、影响地表径流的地表措施。通过这些信息，AquaCrop产生完整的田间管理参数。
* 创建土壤剖面信息
每层土质、厚度
* 创建地下水文件
首先需要选择，1、定水头水质；2、变水头水质。随后指定相应的输入信息。
* 创建初始条件文件
指定第一天的土壤含水率、土壤盐分含量、作物生长和产量。
* 创建田间数据文件
通过Field menu指定实际观测日期的冠层覆盖度、或者地上干生物量、或者土壤水分。
* 创建项目文件
首先选择1、单次运行；2、多年连续运行；3、轮作。

## 2.7 推出和关闭按钮

## 2.8 菜单层级结构
### 2.8.1 环境和作物面板（主菜单）
### 2.8.2 模拟面板（主菜单）

## 2.9 气象数据
### 2.9.1 AquaCrop需要的气象数据
对于每天的模拟，AquaCrop需要
* 最低气温Tn和最高气温Tx；
* ET0；
* 降雨；
* 年均CO2浓度；
气象数据存储在以下文件中，
* 温度文件，扩展名为“.Tnx”；
* ET0文件，扩展名为“.ET0”；
* 降雨文件，扩展名为“.PLU”；
* CO2文件，扩展名为“.CO2”；

**最小最大气温**







